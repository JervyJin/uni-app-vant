(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tab_wd/jfsb_add"],{"1a1c":function(t,e,a){"use strict";(function(t){a("25b1"),a("921b");i(a("66fd"));var e=i(a("f7c7"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("6e42")["createPage"])},"36a0":function(t,e,a){"use strict";a.r(e);var i=a("7fe7"),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);e["default"]=n.a},"679a":function(t,e,a){},"7fe7":function(t,e,a){"use strict";(function(t,a,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{temp_img:[],material_name:"",material_src:"",star_arr:[{id:1,integraltName:"政治星"}],star_index:0,jifen_arr:[{id:1,integral_ame:"积极参与志愿服务活动"}],jifen_index:0}},onLoad:function(){var e=t.isLogin();e?(this.user_token=e.user_token,this.user_id=e.user_id,this.user_type=e.user_type,this.get_info()):a.showModal({title:"提示",content:"请先登录吧！",showCancel:!0,success:function(t){t.confirm?a.navigateTo({url:"../login/login"}):t.cancel&&a.switchTab({url:"../home_page/home_page"})}})},methods:{get_info:function(){var t=this;this.req.request("/appUser/getStarList",{},"POST",function(e){t.star_arr=e.data})},star_picker:function(t){var e=this;this.star_index=t.detail.value,this.req.request("/appUser/getIntegralList",{IntegraltId:this.star_arr[this.star_index].id},"POST",function(t){e.jifen_arr=t.data,e.jifen_index=0})},jifen_picker:function(t){this.jifen_index=t.detail.value},del_img:function(t){this.temp_img.splice(t,1)},choose_img:function(t){var e=this;this.temp_img.length<5?a.chooseImage({count:1,success:function(t){var n=t.tempFilePaths[0];console.log(i(n," at pages\\tab_wd\\jfsb_add.vue:167")),a.uploadFile({url:e.baseurl.baseurl+"/common/upload",name:"circle",formData:{file_name:"circle"},filePath:n,success:function(t){var a=JSON.parse(t.data);console.log(i(a," at pages\\tab_wd\\jfsb_add.vue:180")),0==e.temp_img.length?e.temp_img=a.data:e.temp_img.push(a.data[0])}})}}):a.showToast({title:"最多5张图片哦~",mask:!0,duration:1500,icon:"none"})},choose_file:function(){var t=this;a.chooseImage({count:1,success:function(e){var n=e.tempFilePaths[0];console.log(i(n," at pages\\tab_wd\\jfsb_add.vue:201")),a.uploadFile({url:t.baseurl.baseurl+"/common/upload",name:"fileDocument",formData:{file_name:"fileDocument"},filePath:n,success:function(e){var a=JSON.parse(e.data);for(var i in a.data[0])t.material_src=i,t.material_name=a.data[0][i]}})}})},formSubmit:function(t){var e=t.detail.value;return e.title_inp?e.content_inp?this.star_index?(console.log(i({token:this.user_token,title:e.title_inp,content:e.content_inp,photos:this.temp_img,material:this.material_src,materialName:this.material_name,type:this.user_type,starType:this.star_arr[this.star_index].id,integralId:this.jifen_arr[this.jifen_index].id}," at pages\\tab_wd\\jfsb_add.vue:251")),void this.req.request("/appUser/AddUserHonor",{token:this.user_token,title:e.title_inp,content:e.content_inp,photos:this.temp_img,material:this.material_src,materialName:this.material_name,type:this.user_type,starType:this.star_arr[this.star_index].id,integralId:this.jifen_arr[this.jifen_index].id},"POST",function(t){a.showModal({title:"提示",content:"添加成功",showCancel:!1,success:function(){a.redirectTo({url:"jfsb"})}})},function(t){a.showToast({title:t.msg,mask:!0,duration:1500,icon:"none"})})):a.showToast({title:"请选择星级分类",mask:!0,duration:1500,icon:"none"}):a.showToast({title:"请输入内容",mask:!0,duration:1500,icon:"none"}):a.showToast({title:"请输入标题",mask:!0,duration:1500,icon:"none"})}}};e.default=n}).call(this,a("c8ba"),a("6e42")["default"],a("0de9")["default"])},9018:function(t,e,a){"use strict";var i=a("679a"),n=a.n(i);n.a},bff6:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement;t._self._c},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},f7c7:function(t,e,a){"use strict";a.r(e);var i=a("bff6"),n=a("36a0");for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);a("9018");var r=a("2877"),o=Object(r["a"])(n["default"],i["a"],i["b"],!1,null,null,null);e["default"]=o.exports}},[["1a1c","common/runtime","common/vendor"]]]);